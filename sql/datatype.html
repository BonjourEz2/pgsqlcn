

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>数据类型 &mdash; PostgreSQL 数据库文档</title>
    
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '9.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="top" title="PostgreSQL 数据库文档" href="../index.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">PostgreSQL 数据库文档</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">內容目录</a></h3>
  <ul>
<li><a class="reference internal" href="#">数据类型</a><ul>
<li><a class="reference internal" href="#id2">数字类型</a><ul>
<li><a class="reference internal" href="#id3">整数类型</a></li>
<li><a class="reference internal" href="#id4">任意精度数字</a></li>
<li><a class="reference internal" href="#id5">浮点类型</a></li>
<li><a class="reference internal" href="#id6">序列号类型</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/sql/datatype.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>快速搜索</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="转向" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    输入相关的术语，模块，类或者函数名称进行搜索
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>数据类型<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<p>PostgreSQL 为用户提供了一集丰富的原生数据类型，
并且也允许用户使用 <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">TYPE</span></code> 命令去创建新的自定义类型。</p>
<p>表格 8-1 展示了 PostgreSQL 内置的所有通用数据类型。
“别名”一栏中列出的大多数别名，
都是因为历史原因而在 PostgreSQL 内部使用的别名。
除此之外，
PostgreSQL 还提供了一些别的内部使用类型或者已被废弃的类型，
不过这些类型并没有在表格 8-1 中展示。</p>
<hr class="docutils" />
<p>表格 8-1 数据类型</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="22%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">名字</th>
<th class="head">别名</th>
<th class="head">作用简介</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">bigint</span></code></td>
<td><code class="docutils literal"><span class="pre">int8</span></code></td>
<td>有符号的 8 字节长整数</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">bigserial</span></code></td>
<td><code class="docutils literal"><span class="pre">serial8</span></code></td>
<td>8 字节长的自增整数</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">bit</span> <span class="pre">[</span> <span class="pre">(n)</span> <span class="pre">]</span></code></td>
<td>&nbsp;</td>
<td>固定长度的位串（bit string）</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">bit</span> <span class="pre">varying</span> <span class="pre">[</span> <span class="pre">(n)</span> <span class="pre">]</span></code></td>
<td><code class="docutils literal"><span class="pre">varbit</span></code></td>
<td>长度可变的位串（bit string）</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">boolean</span></code></td>
<td><code class="docutils literal"><span class="pre">bool</span></code></td>
<td>逻辑布尔值（真/假）</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">box</span></code></td>
<td>&nbsp;</td>
<td>平面上的一个长方体（rectangular box）</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">bytea</span></code></td>
<td>&nbsp;</td>
<td>二进制数据（“字节数组”）</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">character</span> <span class="pre">[</span> <span class="pre">(n)</span> <span class="pre">]</span></code></td>
<td><code class="docutils literal"><span class="pre">char</span> <span class="pre">[</span> <span class="pre">(n)</span> <span class="pre">]</span></code></td>
<td>固定长度的字符串</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">character</span> <span class="pre">varying</span> <span class="pre">[</span> <span class="pre">(n)</span> <span class="pre">]</span></code></td>
<td><code class="docutils literal"><span class="pre">varchar</span> <span class="pre">[</span> <span class="pre">(n)</span> <span class="pre">]</span></code></td>
<td>长度可变的字符串</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">cidr</span></code></td>
<td>&nbsp;</td>
<td>IPv4 或者 IPv6 格式的网络地址</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">circle</span></code></td>
<td>&nbsp;</td>
<td>平面上的一个圈（circle）</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">date</span></code></td>
<td>&nbsp;</td>
<td>日历日期（年，月，日）</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">double</span> <span class="pre">precision</span></code></td>
<td><code class="docutils literal"><span class="pre">float8</span></code></td>
<td>8 字节长的双精度浮点数</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">inet</span></code></td>
<td>&nbsp;</td>
<td>IPv4 或者 IPv6 格式的主机地址（host address）</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">integer</span></code></td>
<td><code class="docutils literal"><span class="pre">int</span></code> , <code class="docutils literal"><span class="pre">int4</span></code></td>
<td>四字节长的有符号整数</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">interval</span> <span class="pre">[</span> <span class="pre">fields</span> <span class="pre">]</span> <span class="pre">[</span> <span class="pre">(p)</span> <span class="pre">]</span></code></td>
<td>&nbsp;</td>
<td>时间间隔</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">json</span></code></td>
<td>&nbsp;</td>
<td>文化式形式（textual）的 JSON 数据</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">jsonb</span></code></td>
<td>&nbsp;</td>
<td>二进制形式的 JSON 数据，decomposed</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">line</span></code></td>
<td>&nbsp;</td>
<td>平面上的一条无限长的直线</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">lseg</span></code></td>
<td>&nbsp;</td>
<td>平面上的一个线段</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">macaddr</span></code></td>
<td>&nbsp;</td>
<td>MAC（Media Access Control，媒体访问控制）地址</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">money</span></code></td>
<td>&nbsp;</td>
<td>金额数量</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">numeric</span> <span class="pre">[</span> <span class="pre">(p,</span> <span class="pre">s)</span> <span class="pre">]</span></code></td>
<td><code class="docutils literal"><span class="pre">decimal</span> <span class="pre">[</span> <span class="pre">(p,</span> <span class="pre">s)</span> <span class="pre">]</span></code></td>
<td>精度可选的精确小数</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">path</span></code></td>
<td>&nbsp;</td>
<td>平面上的一条几何路径</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">pg_lsn</span></code></td>
<td>&nbsp;</td>
<td>PostgreSQL 的日志序列数字</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">point</span></code></td>
<td>&nbsp;</td>
<td>平上面的一个几何点</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">polygon</span></code></td>
<td>&nbsp;</td>
<td>平面上的一条封闭集合路径</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">real</span></code></td>
<td><code class="docutils literal"><span class="pre">float4</span></code></td>
<td>4 字节长的单精度浮点数</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">smallint</span></code></td>
<td><code class="docutils literal"><span class="pre">int2</span></code></td>
<td>2 字节长的有符号整数</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">smallserial</span></code></td>
<td><code class="docutils literal"><span class="pre">serial2</span></code></td>
<td>2 字节长的自增整数</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">serial</span></code></td>
<td><code class="docutils literal"><span class="pre">serial4</span></code></td>
<td>4 字节长的自增整数</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">text</span></code></td>
<td>&nbsp;</td>
<td>长度可变的字符串</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">time</span> <span class="pre">[</span> <span class="pre">(p)</span> <span class="pre">]</span> <span class="pre">[</span> <span class="pre">without</span> <span class="pre">time</span> <span class="pre">zone</span> <span class="pre">]</span></code></td>
<td>&nbsp;</td>
<td>一天中的时间（不带时区）</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">time</span> <span class="pre">[</span> <span class="pre">(p)</span> <span class="pre">]</span> <span class="pre">with</span> <span class="pre">time</span> <span class="pre">zone</span></code></td>
<td><code class="docutils literal"><span class="pre">timetz</span></code></td>
<td>一天中的时间（带时区）</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">timestamp</span> <span class="pre">[</span> <span class="pre">(p)</span> <span class="pre">]</span> <span class="pre">[</span> <span class="pre">without</span> <span class="pre">time</span> <span class="pre">zone</span> <span class="pre">]</span></code></td>
<td>&nbsp;</td>
<td>日期和时间（不带时区）</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">timestamp</span> <span class="pre">[</span> <span class="pre">(p)</span> <span class="pre">]</span> <span class="pre">with</span> <span class="pre">time</span> <span class="pre">zone</span></code></td>
<td>&nbsp;</td>
<td>日期和时间（带时区）</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">tsquery</span></code></td>
<td>&nbsp;</td>
<td>文本搜索查询</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">tsvector</span></code></td>
<td>&nbsp;</td>
<td>文本搜索文档</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">txid_snapshot</span></code></td>
<td>&nbsp;</td>
<td>用户级别（user-level）的事务 ID 快照（snapshot）</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">uuid</span></code></td>
<td>&nbsp;</td>
<td>全局唯一标识符</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">xml</span></code></td>
<td>&nbsp;</td>
<td>XML 数据</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>每种数据类型的外部表示都由它们自己的输入和输出函数决定。
大多数内置类型都有明显的外部格式。
诸如集合路径这样的路径是 PostgreSQL 特有的，
而像是 <code class="docutils literal"><span class="pre">date</span></code> 和 <code class="docutils literal"><span class="pre">time</span></code> 这样的类型则拥有好几种不同的格式。
某些输入和输出函数是不可逆的（invertible），
也即是说，
输入函数的结果与它原来的输入相比，
可能会出现一定程度的精度丢失。</p>
<div class="section" id="id2">
<h2>数字类型<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>PostgreSQL 的数字类型包含两字节、四字节和八字节整数，
四字节和八字节浮点数，
以及精度可选的小数构成。
表格 8-2 列出了所有可用的类型。</p>
<hr class="docutils" />
<p>表 8-2 数字类型</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="11%" />
<col width="22%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">名字</th>
<th class="head">占用空间</th>
<th class="head">作用简介</th>
<th class="head">取值范围</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">smallint</span></code></td>
<td>2 字节</td>
<td>取值范围较小的整数</td>
<td><code class="docutils literal"><span class="pre">-32768</span></code> 至 <code class="docutils literal"><span class="pre">+32767</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">integer</span></code></td>
<td>4 字节</td>
<td>典型的整数</td>
<td><code class="docutils literal"><span class="pre">-2147483648</span></code> 至 <code class="docutils literal"><span class="pre">+2147483647</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">bigint</span></code></td>
<td>8 字节</td>
<td>取值范围较大的整数</td>
<td><code class="docutils literal"><span class="pre">-9223372036854775808</span></code> 至 <code class="docutils literal"><span class="pre">+9223372036854775807</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">decimal</span></code></td>
<td>长度可变</td>
<td>由用户指定精度的精确数字</td>
<td>小数点之前最多 <code class="docutils literal"><span class="pre">131072</span></code> 个数字，小数点之后最多 <code class="docutils literal"><span class="pre">16383</span></code> 个数字</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">numeric</span></code></td>
<td>长度可变</td>
<td>由用户指定精度的精确数字</td>
<td>小数点之前最多 <code class="docutils literal"><span class="pre">131072</span></code> 个数字，小数点之后最多 <code class="docutils literal"><span class="pre">16383</span></code> 个数字</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">real</span></code></td>
<td>4 字节</td>
<td>精度可变的不精确数字</td>
<td>精确至小数点后 6 位</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">double</span> <span class="pre">precision</span></code></td>
<td>8 字节</td>
<td>精度可变的不精确数字</td>
<td>精确至小数点后 15 位</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">smallserial</span></code></td>
<td>2 字节</td>
<td>小的自增整数</td>
<td><code class="docutils literal"><span class="pre">1</span></code> 至 <code class="docutils literal"><span class="pre">32767</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">serial</span></code></td>
<td>4 字节</td>
<td>自增整数</td>
<td><code class="docutils literal"><span class="pre">1</span></code> 至 <code class="docutils literal"><span class="pre">2147483647</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">bigserial</span></code></td>
<td>8 字节</td>
<td>大的自增整数</td>
<td><code class="docutils literal"><span class="pre">1</span></code> 至 <code class="docutils literal"><span class="pre">9223372036854775807</span></code></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>本文档的 4.1.2 节描述了数字类型常量所使用的语法。
数字类型拥有一整套相应的数字操作和函数，
这些操作和函数将在本文档的第 9 章进行介绍。
本节接下来将对各个数字类型的细节进行描述。</p>
<div class="section" id="id3">
<h3>整数类型<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal"><span class="pre">smallint</span></code> 、 <code class="docutils literal"><span class="pre">integer</span></code> 和 <code class="docutils literal"><span class="pre">bigint</span></code> 这三种类型都可以用于储存不带小数部分的数字，
它们之间的唯一区别就是各自的取值范围不同。
尝试在这些类型的列里面储存一个超出取值范围的值将引发一个错误。</p>
<p><code class="docutils literal"><span class="pre">integer</span></code> 类型是最常用的整数类型，
它在取值范围、储存空间和性能上面都提供了最好的平衡性。
<code class="docutils literal"><span class="pre">smallint</span></code> 类型通常只在硬盘空间非常昂贵的情况下使用。</p>
<p>SQL 标准只指定了 <code class="docutils literal"><span class="pre">integer</span></code> 类型（又称 <code class="docutils literal"><span class="pre">int</span></code> 类型）、 <code class="docutils literal"><span class="pre">smallint</span></code> 类型和 <code class="docutils literal"><span class="pre">bigint</span></code> 类型。
类型名 <code class="docutils literal"><span class="pre">int2</span></code> 、 <code class="docutils literal"><span class="pre">int4</span></code> 和 <code class="docutils literal"><span class="pre">int8</span></code> 都是 PostgreSQL 自身的扩展，
某些其他的 SQL 数据库系统也在使用这些扩展。</p>
</div>
<div class="section" id="id4">
<h3>任意精度数字<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal"><span class="pre">numeric</span></code> 类型可以储存数字非常多的数值，
它适合用来储存金额或者其他要求精确性的数量值。
在有可能的情况下，
<code class="docutils literal"><span class="pre">numeric</span></code> 值之间的计算（比如加法、加法和乘法）将产生一个精确的结果。
但是，
与整数类型或者下一节介绍的浮点数类型相比，
<code class="docutils literal"><span class="pre">numeric</span></code> 值的计算速度会慢很多。</p>
<p>本文档接下来将使用以下术语来描述 <code class="docutils literal"><span class="pre">number</span></code> 值：
一个 <code class="docutils literal"><span class="pre">numeric</span></code> 值的规模（scale）指的是这个值在小数点之后，
有多少个数字；
而一个 <code class="docutils literal"><span class="pre">numeric</span></code> 值的精度（precision），
指的则是这个值总共包含了多少个有符号数字。
比如说，
数字 23.5141 的精度为 6 ，
规模为 4 。
我们可以将整数的规模看做是 0 。</p>
<p><code class="docutils literal"><span class="pre">numeric</span></code> 列的最大精度和最大规模都是可配置的。
定义一个 <code class="docutils literal"><span class="pre">numeric</span></code> 类型的列可以使用以下语法：</p>
<div class="highlight-postgresql"><div class="highlight"><pre><span class="nb">NUMERIC</span><span class="p">(</span><span class="k">precision</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
</pre></div>
</div>
<p>精度必须是正数，
而规模则可以是 <code class="docutils literal"><span class="pre">0</span></code> 或者正数。
此外，
如果向定义规模为 <code class="docutils literal"><span class="pre">0</span></code> 的 <code class="docutils literal"><span class="pre">numeric</span></code> 值，
那么可以使用以下声明：</p>
<div class="highlight-postgresql"><div class="highlight"><pre><span class="nb">NUMERIC</span><span class="p">(</span><span class="k">precision</span><span class="p">)</span>
</pre></div>
</div>
<p>最后，
如果我们使用以下这种不带精度和规模的声明去创建一个列：</p>
<div class="highlight-postgresql"><div class="highlight"><pre><span class="nb">NUMERIC</span>
</pre></div>
</div>
<p>那么这个列将能够储存任意精度和规模的 <code class="docutils literal"><span class="pre">numeric</span></code> 值，
它的最大精度和规模只受实现的限制。</p>
<p>不指定精度和规模的 <code class="docutils literal"><span class="pre">numeric</span></code> 列不会将输入值强制转换为任何特定的规模，
但指定了规模的 <code class="docutils literal"><span class="pre">numeric</span></code> 列则会通过强制转换，
将输入值转换为指定的规模。
（SQL 标准要求为 <code class="docutils literal"><span class="pre">0</span></code> 设置一个默认的规模，
用于将值强制转换为整数精度，
但是这个规则的作用并不大。
对移植性有要求的用户可以总是显式地指定精度和规模。）</p>
<p>如果输入值的规模比列定义时指定的规模要大，
那么系统将会把输入值四舍五入至指定的小数位。
之后，
如果输入值位于小数点左边的数字数量，
超过了列的精度减去列的规模得出的差，
那么系统将抛出一个错误。</p>
<div class="highlight-postgresql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="n">x</span><span class="p">,</span>
  <span class="n">round</span><span class="p">(</span><span class="n">x</span><span class="o">::</span><span class="nb">numeric</span><span class="p">)</span> <span class="k">AS</span> <span class="n">num_round</span><span class="p">,</span>
  <span class="n">round</span><span class="p">(</span><span class="n">x</span><span class="o">::</span><span class="nb">double precision</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dbl_round</span>
<span class="k">FROM</span> <span class="n">generate_series</span><span class="p">(</span><span class="o">-</span><span class="mf">3.5</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mf">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">x</span><span class="p">;</span>
  <span class="n">x</span>   <span class="o">|</span> <span class="n">num_round</span> <span class="o">|</span> <span class="n">dbl_round</span>
<span class="c1">------+-----------+-----------</span>
 <span class="o">-</span><span class="mf">3.5</span> <span class="o">|</span>        <span class="o">-</span><span class="mf">4</span> <span class="o">|</span>        <span class="o">-</span><span class="mf">4</span>
 <span class="o">-</span><span class="mf">2.5</span> <span class="o">|</span>        <span class="o">-</span><span class="mf">3</span> <span class="o">|</span>        <span class="o">-</span><span class="mf">2</span>
 <span class="o">-</span><span class="mf">1.5</span> <span class="o">|</span>        <span class="o">-</span><span class="mf">2</span> <span class="o">|</span>        <span class="o">-</span><span class="mf">2</span>
 <span class="o">-</span><span class="mf">0.5</span> <span class="o">|</span>        <span class="o">-</span><span class="mf">1</span> <span class="o">|</span>        <span class="o">-</span><span class="mf">0</span>
  <span class="mf">0.5</span> <span class="o">|</span>         <span class="mf">1</span> <span class="o">|</span>         <span class="mf">0</span>
  <span class="mf">1.5</span> <span class="o">|</span>         <span class="mf">2</span> <span class="o">|</span>         <span class="mf">2</span>
  <span class="mf">2.5</span> <span class="o">|</span>         <span class="mf">3</span> <span class="o">|</span>         <span class="mf">2</span>
  <span class="mf">3.5</span> <span class="o">|</span>         <span class="mf">4</span> <span class="o">|</span>         <span class="mf">4</span>
<span class="p">(</span><span class="mf">8</span> <span class="k">rows</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h3>浮点类型<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h3>
<p>The data types real and double precision are inexact, variable-precision numeric types. In practice, these types are usually implementations of IEEE Standard 754 for Binary Floating-Point Arithmetic (single and double precision, respectively), to the extent that the underlying processor, operating system, and compiler support it.</p>
<p>Inexact means that some values cannot be converted exactly to the internal format and are stored as approximations, so that storing and retrieving a value might show slight discrepancies. Managing these errors and how they propagate through calculations is the subject of an entire branch of mathematics and computer science and will not be discussed here, except for the following points:</p>
<ul class="simple">
<li>If you require exact storage and calculations (such as for monetary amounts), use the numeric type instead.</li>
<li>If you want to do complicated calculations with these types for anything important, especially if you rely on certain behavior in boundary cases (infinity, underflow), you should evaluate the implementation carefully.</li>
<li>Comparing two floating-point values for equality might not always work as expected.</li>
</ul>
<p>On most platforms, the real type has a range of at least 1E-37 to 1E+37 with a precision of at least 6 decimal digits. The double precision type typically has a range of around 1E-307 to 1E+308 with a precision of at least 15 digits. Values that are too large or too small will cause an error. Rounding might take place if the precision of an input number is too high. Numbers too close to zero that are not representable as distinct from zero will cause an underflow error.</p>
<p>Note: The extra_float_digits setting controls the number of extra significant digits included when a floating point value is converted to text for output. With the default value of 0, the output is the same on every platform supported by PostgreSQL. Increasing it will produce output that more accurately represents the stored value, but may be unportable.</p>
<p>In addition to ordinary numeric values, the floating-point types have several special values:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">Infinity</span></code></li>
<li><code class="docutils literal"><span class="pre">-Infinity</span></code></li>
<li><code class="docutils literal"><span class="pre">NaN</span></code></li>
</ul>
<p>These represent the IEEE 754 special values &#8220;infinity&#8221;, &#8220;negative infinity&#8221;, and &#8220;not-a-number&#8221;, respectively. (On a machine whose floating-point arithmetic does not follow IEEE 754, these values will probably not work as expected.) When writing these values as constants in an SQL command, you must put quotes around them, for example UPDATE table SET x = &#8216;Infinity&#8217;. On input, these strings are recognized in a case-insensitive manner.</p>
<p>Note: IEEE754 specifies that NaN should not compare equal to any other floating-point value (including NaN). In order to allow floating-point values to be sorted and used in tree-based indexes, PostgreSQL treats NaN values as equal, and greater than all non-NaN values.</p>
<p>PostgreSQL also supports the SQL-standard notations float and float(p) for specifying inexact numeric types. Here, p specifies the minimum acceptable precision in binary digits. PostgreSQL accepts float(1) to float(24) as selecting the real type, while float(25) to float(53) select double precision. Values of p outside the allowed range draw an error. float with no precision specified is taken to mean double precision.</p>
<p>Note: The assumption that real and double precision have exactly 24 and 53 bits in the mantissa respectively is correct for IEEE-standard floating point implementations. On non-IEEE platforms it might be off a little, but for simplicity the same ranges of p are used on all platforms.</p>
</div>
<div class="section" id="id6">
<h3>序列号类型<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h3>
<p>The data types smallserial, serial and bigserial are not true types, but merely a notational convenience for creating unique identifier columns (similar to the AUTO_INCREMENT property supported by some other databases). In the current implementation, specifying:</p>
<div class="highlight-postgresql"><div class="highlight"><pre><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">tablename</span> <span class="p">(</span>
    <span class="n">colname</span> <span class="nb">SERIAL</span>
<span class="p">);</span>
</pre></div>
</div>
<p>is equivalent to specifying:</p>
<div class="highlight-postgresql"><div class="highlight"><pre><span class="k">CREATE</span> <span class="k">SEQUENCE</span> <span class="n">tablename_colname_seq</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">tablename</span> <span class="p">(</span>
    <span class="n">colname</span> <span class="nb">integer</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">DEFAULT</span> <span class="n">nextval</span><span class="p">(</span><span class="s1">&#39;tablename_colname_seq&#39;</span><span class="p">)</span>
<span class="p">);</span>
<span class="k">ALTER</span> <span class="k">SEQUENCE</span> <span class="n">tablename_colname_seq</span> <span class="k">OWNED</span> <span class="k">BY</span> <span class="n">tablename</span><span class="mf">.</span><span class="n">colname</span><span class="p">;</span>
</pre></div>
</div>
<p>Thus, we have created an integer column and arranged for its default values to be assigned from a sequence generator. A NOT NULL constraint is applied to ensure that a null value cannot be inserted. (In most cases you would also want to attach a UNIQUE or PRIMARY KEY constraint to prevent duplicate values from being inserted by accident, but this is not automatic.) Lastly, the sequence is marked as &#8220;owned by&#8221; the column, so that it will be dropped if the column or table is dropped.</p>
<p>Note: Because smallserial, serial and bigserial are implemented using sequences, there may be &#8220;holes&#8221; or gaps in the sequence of values which appears in the column, even if no rows are ever deleted. A value allocated from the sequence is still &#8220;used up&#8221; even if a row containing that value is never successfully inserted into the table column. This may happen, for example, if the inserting transaction rolls back. See nextval() in Section 9.16 for details.</p>
<p>To insert the next value of the sequence into the serial column, specify that the serial column should be assigned its default value. This can be done either by excluding the column from the list of columns in the INSERT statement, or through the use of the DEFAULT key word.</p>
<p>The type names serial and serial4 are equivalent: both create integer columns. The type names bigserial and serial8 work the same way, except that they create a bigint column. bigserial should be used if you anticipate the use of more than 2^31 identifiers over the lifetime of the table. The type names smallserial and serial2 also work the same way, except that they create a smallint column.</p>
<p>The sequence created for a serial column is automatically dropped when the owning column is dropped. You can drop the sequence without dropping the column, but this will force removal of the column default expression.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             >索引</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">PostgreSQL 数据库文档</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; 版权所有 2015, 黄健宏.
      由 <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1 创建。
    </div>
  </body>
</html>